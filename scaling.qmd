---
title: "Scaling Relationships"
subtitle: "Studying Malaria Metrics Across the Spectrum of Transmission Intensity"
editor:
  mode: source
bibliography: data/refs.bib
csl: data/plos.csl 
format: html
html-math-method:
  method: mathjax
  url: "https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"
---

------------------------------------------------------------------------

This vignette is an overview of **scaling relationships** for SimBA users. Two closely related vignettes are:

-   [**ramp.work**:: Scaling](https://dd-harp.github.io/ramp.work/articles/Scaling.html) -- package documentation & a basic demo 

-   [**Malaria Theory**:: Scaling](https://faculty.washington.edu/smitdave/theory/scaling.html) -- a discussion of *malaria scaling relationships* using models and data.  

------------------------------------------------------------------------

Load the required packages:

```{r, messge=FALSE}
library(MASS)
library(ramp.xds)
library(ramp.library)
library(ramp.control)
library(ramp.work)
library(deSolve)
library(rootSolve)
library(graphics)
```

A core need in malaria epidemiology is to understand the relationship between the *Pf*PR and other metrics, including measures of burden. To address this need, **`ramp.work`** developed a function, called `xds_scaling,` that computes *scaling relationships* for models of malaria epidemiology.

## xds_scaling

The function `xds_scaling()` defines the relationship between the EIR and the PR, and it outputs stable orbits for each value of aEIR in a mesh from $10^{-1}$ up to $10^{3}$

```{r sis, eval=F}
xds_setup_eir(Xname = "SIS") -> sis
```

```{r scaling, eval=F}
xds_scaling(sis, 25) -> sis
```

```{r sis scaling, echo=F}
if(file.exists("./models/sis.rds")){
  sis <- readRDS("./models/sis.rds")
} else {
  sis <- xds_setup_eir(Xname = "SIS")
  xds_scaling(sis, 25) -> sis 
  saveRDS(sis, file="./models/sis.rds")
}
```

```{r plot, fig.height=3.5, fig.width=5}
xds_plot_eirpr(sis)
```
