---
title: "Scaling Relationships"
subtitle: "Environmental Heterogeneity"
editor:
  mode: source
bibliography: data/refs.bib
csl: data/plos.csl 
format: html
html-math-method:
  method: mathjax
  url: "https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"
---

```{r}
library(ramp.xds)
library(ramp.work)
```

```{r sis}
sis <- readRDS("./models/sis.rds")
```

```{r, eval=F}
sis_het <- setup_exposure("nb", sis, i=1, list(sz=1/50))
sis_het <- xds_scaling(sis_het)
```

```{r sip scaling, echo=F}
if(file.exists("./models/sis_het.rds")){
  sis_het <- readRDS("./models/sis_het.rds")
} else {
  sis_het <- setup_exposure("nb", sis, i=1, list(sz=1/50))
  sis_het <- xds_scaling(sis_het)
  saveRDS(sis_het, file="./models/sis_het.rds")
}
```

```{r scaling}
xds_scaling(sis_het, 25) -> sis_het
```

```{r}
plot_eirpr(sis)
lines_eirpr(sis_het, "darkblue")
```


